<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Core peripherals."><title>cortex_m::peripheral - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="cortex_m" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../cortex_m/index.html">cortex_<wbr>m</a><span class="version">0.7.7</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module peripheral</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#api" title="API">API</a></li><li><a href="#references" title="References">References</a></li></ul><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate cortex_<wbr>m</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">cortex_m</a></div><h1>Module <span>peripheral</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/cortex_m/peripheral/mod.rs.html#1-685">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Core peripherals.</p>
<h2 id="api"><a class="doc-anchor" href="#api">§</a>API</h2>
<p>To use (most of) the peripheral API first you must get an <em>instance</em> of the peripheral. All the
core peripherals are modeled as singletons (there can only ever be, at most, one instance of any
one of them at any given point in time) and the only way to get an instance of them is through
the <a href="struct.Peripherals.html#method.take"><code>Peripherals::take</code></a> method.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
peripherals.DCB.enable_trace();</code></pre></div>
<p>This method can only be successfully called <em>once</em> – this is why the method returns an
<code>Option</code>. Subsequent calls to the method will result in a <code>None</code> value being returned.</p>

<div class="example-wrap should_panic"><a href="#" class="tooltip" title="This example panics">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ok = Peripherals::take().unwrap();
<span class="kw">let </span>panics = Peripherals::take().unwrap();</code></pre></div>
<p>A part of the peripheral API doesn’t require access to a peripheral instance. This part of the
API is provided as static methods on the peripheral types. One example is the
<a href="struct.DWT.html#method.cycle_count"><code>DWT::cycle_count</code></a> method.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>{
    <span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
    peripherals.DCB.enable_trace();
    peripherals.DWT.enable_cycle_counter();
} <span class="comment">// all the peripheral singletons are destroyed here

// but this method can be called without a DWT instance
</span><span class="kw">let </span>cyccnt = DWT::cycle_count();</code></pre></div>
<p>The singleton property can be <em>unsafely</em> bypassed using the <code>ptr</code> static method which is
available on all the peripheral types. This method is a useful building block for implementing
safe higher level abstractions.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>{
    <span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
    peripherals.DCB.enable_trace();
    peripherals.DWT.enable_cycle_counter();
} <span class="comment">// all the peripheral singletons are destroyed here

// actually safe because this is an atomic read with no side effects
</span><span class="kw">let </span>cyccnt = <span class="kw">unsafe </span>{ (<span class="kw-2">*</span>DWT::PTR).cyccnt.read() };</code></pre></div>
<h2 id="references"><a class="doc-anchor" href="#references">§</a>References</h2>
<ul>
<li>ARMv7-M Architecture Reference Manual (Issue E.b) - Chapter B3</li>
</ul>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="cbp/index.html" title="mod cortex_m::peripheral::cbp">cbp</a></dt><dd>Cache and branch predictor maintenance operations</dd><dt><a class="mod" href="cpuid/index.html" title="mod cortex_m::peripheral::cpuid">cpuid</a></dt><dd>CPUID</dd><dt><a class="mod" href="dcb/index.html" title="mod cortex_m::peripheral::dcb">dcb</a></dt><dd>Debug Control Block</dd><dt><a class="mod" href="dwt/index.html" title="mod cortex_m::peripheral::dwt">dwt</a></dt><dd>Data Watchpoint and Trace unit</dd><dt><a class="mod" href="fpb/index.html" title="mod cortex_m::peripheral::fpb">fpb</a></dt><dd>Flash Patch and Breakpoint unit</dd><dt><a class="mod" href="fpu/index.html" title="mod cortex_m::peripheral::fpu">fpu</a></dt><dd>Floating Point Unit</dd><dt><a class="mod" href="icb/index.html" title="mod cortex_m::peripheral::icb">icb</a></dt><dd>Implementation Control Block</dd><dt><a class="mod" href="itm/index.html" title="mod cortex_m::peripheral::itm">itm</a></dt><dd>Instrumentation Trace Macrocell</dd><dt><a class="mod" href="mpu/index.html" title="mod cortex_m::peripheral::mpu">mpu</a></dt><dd>Memory Protection Unit</dd><dt><a class="mod" href="nvic/index.html" title="mod cortex_m::peripheral::nvic">nvic</a></dt><dd>Nested Vector Interrupt Controller</dd><dt><a class="mod" href="scb/index.html" title="mod cortex_m::peripheral::scb">scb</a></dt><dd>System Control Block</dd><dt><a class="mod" href="syst/index.html" title="mod cortex_m::peripheral::syst">syst</a></dt><dd>SysTick: System Timer</dd><dt><a class="mod" href="tpiu/index.html" title="mod cortex_m::peripheral::tpiu">tpiu</a></dt><dd>Trace Port Interface Unit;</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.CBP.html" title="struct cortex_m::peripheral::CBP">CBP</a></dt><dd>Cache and branch predictor maintenance operations</dd><dt><a class="struct" href="struct.CPUID.html" title="struct cortex_m::peripheral::CPUID">CPUID</a></dt><dd>CPUID</dd><dt><a class="struct" href="struct.DCB.html" title="struct cortex_m::peripheral::DCB">DCB</a></dt><dd>Debug Control Block</dd><dt><a class="struct" href="struct.DWT.html" title="struct cortex_m::peripheral::DWT">DWT</a></dt><dd>Data Watchpoint and Trace unit</dd><dt><a class="struct" href="struct.FPB.html" title="struct cortex_m::peripheral::FPB">FPB</a></dt><dd>Flash Patch and Breakpoint unit</dd><dt><a class="struct" href="struct.FPU.html" title="struct cortex_m::peripheral::FPU">FPU</a></dt><dd>Floating Point Unit</dd><dt><a class="struct" href="struct.ICB.html" title="struct cortex_m::peripheral::ICB">ICB</a></dt><dd>Implementation Control Block.</dd><dt><a class="struct" href="struct.ITM.html" title="struct cortex_m::peripheral::ITM">ITM</a></dt><dd>Instrumentation Trace Macrocell</dd><dt><a class="struct" href="struct.MPU.html" title="struct cortex_m::peripheral::MPU">MPU</a></dt><dd>Memory Protection Unit</dd><dt><a class="struct" href="struct.NVIC.html" title="struct cortex_m::peripheral::NVIC">NVIC</a></dt><dd>Nested Vector Interrupt Controller</dd><dt><a class="struct" href="struct.Peripherals.html" title="struct cortex_m::peripheral::Peripherals">Peripherals</a></dt><dd>Core peripherals</dd><dt><a class="struct" href="struct.SAU.html" title="struct cortex_m::peripheral::SAU">SAU</a></dt><dd>Security Attribution Unit</dd><dt><a class="struct" href="struct.SCB.html" title="struct cortex_m::peripheral::SCB">SCB</a></dt><dd>System Control Block</dd><dt><a class="struct" href="struct.SYST.html" title="struct cortex_m::peripheral::SYST">SYST</a></dt><dd>SysTick: System Timer</dd><dt><a class="struct" href="struct.TPIU.html" title="struct cortex_m::peripheral::TPIU">TPIU</a></dt><dd>Trace Port Interface Unit</dd></dl></section></div></main></body></html>